# Main entrypoint of the workflow. 
# Please follow the best practices: 
# https://snakemake.readthedocs.io/en/stable/snakefiles/best_practices.html,
# in particular regarding the standardized folder structure mentioned there. 

n_test_sims = 2000 # number of simulations to use for testing
n_train_sims_per_job = 250 # number of simulations per training data simulating job
n_train_reps = 300 # number of training data simulation jobs to run
# Snakefile
import os

# Get the list of rule files
rule_files = [os.path.join("rules/", f) for f in os.listdir("rules/") if f.endswith(".smk")]

# Include the rule files
for rule in rule_files:
    include: rule

# Define the final target
rule final:
    input:
        expand("results/rep_{i}_{Ntrain}_simulations.npy", i=range(n_train_reps), Ntrain=n_train_sims_per_job),
        expand("results/test_{Ntest}_simulations.npy", Ntest=n_test_sims),